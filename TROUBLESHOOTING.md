# Руководство по устранению неполадок

## Проблемы с кнопками

### Симптомы:
- Кнопки не реагируют на нажатия
- Нет реакции после нажатия на любую кнопку
- Бот не отвечает на действия пользователя

### Возможные причины и решения:

#### 1. Конфликт нескольких экземпляров бота
**Ошибка в логах:** `Conflict: terminated by other getUpdates request; make sure that only one bot instance is running`

**Решение:**
1. Остановите все запущенные экземпляры бота через лаунчер
2. Используйте пункт "Остановить бота" в [launcher.bat](file:///d:/Users/br/Documents/GitHub/site/launcher.bat)
3. Убедитесь, что в диспетчере задач нет процессов python.exe, связанных с bot.py
4. Перезапустите бота через лаунчер

#### 2. Неправильный токен бота
**Ошибка в логах:** `Unauthorized` или `Bad Request: token is invalid`

**Решение:**
1. Проверьте файл [.env](file:///d:/Users/br/Documents/GitHub/site/.env)
2. Убедитесь, что TELEGRAM_BOT_TOKEN содержит правильный токен
3. Получите токен у @BotFather в Telegram, если текущий недействителен

#### 3. Проблемы с подключением к интернету
**Ошибка в логах:** `NetworkError` или таймауты

**Решение:**
1. Проверьте подключение к интернету
2. Убедитесь, что Telegram API доступен (https://api.telegram.org)
3. Если вы используете прокси, настройте его в конфигурации бота

#### 4. Ошибки в обработчике callback-запросов
**Ошибка в логах:** `Error handling callback query` с трассировкой стека

**Решение:**
1. Проверьте логи в файле [bot.log](file:///d:/Users/br/Documents/GitHub/site/bot.log)
2. Найдите конкретную ошибку и строку кода
3. Исправьте проблему в соответствующем обработчике

## Проблемы с запуском

### Симптомы:
- Лаунчер не может запустить бота
- Сообщения об ошибках при запуске
- Бот запускается, но сразу завершает работу

### Возможные причины и решения:

#### 1. Отсутствующие зависимости
**Ошибка:** `ModuleNotFoundError` или подобные

**Решение:**
1. Запустите [launcher.bat](file:///d:/Users/br/Documents/GitHub/site/launcher.bat)
2. Выберите пункт "Установить/обновить зависимости"
3. Или вручную выполните: `pip install -r requirements.txt`

#### 2. Неправильная конфигурация
**Ошибка:** Сообщения о неправильной конфигурации

**Решение:**
1. Запустите [launcher.bat](file:///d:/Users/br/Documents/GitHub/site/launcher.bat)
2. Выберите пункт "Проверить конфигурацию"
3. Следуйте инструкциям для исправления проблем

#### 3. Проблемы с файлами данных
**Ошибка:** Ошибки при чтении/записи файлов данных

**Решение:**
1. Проверьте права доступа к каталогу с ботом
2. Убедитесь, что файлы [user_data.json](file:///d:/Users/br/Documents/GitHub/site/user_data.json) и [user_states.json](file:///d:/Users/br/Documents/GitHub/site/user_states.json) доступны для чтения/записи
3. При необходимости удалите эти файлы (будут созданы заново)

## Диагностика

### Использование встроенного инструмента диагностики:
1. Запустите [launcher.bat](file:///d:/Users/br/Documents/GitHub/site/launcher.bat)
2. Выберите пункт "Диагностика проблем"
3. Проверьте вывод на наличие ошибок

### Проверка логов:
1. Запустите [launcher.bat](file:///d:/Users/br/Documents/GitHub/site/launcher.bat)
2. Выберите пункт "Проверить логи"
3. Или откройте файл [bot.log](file:///d:/Users/br/Documents/GitHub/site/bot.log) в текстовом редакторе

### Ручная проверка:
1. Откройте командную строку в каталоге бота
2. Выполните: `python check_config.py --diagnose`
3. Проверьте вывод на наличие ошибок

## Часто задаваемые вопросы

### Почему кнопки не работают?
Наиболее частая причина - запущено несколько экземпляров бота. Используйте лаунчер для управления ботом, который автоматически останавливает предыдущие экземпляры.

### Как остановить бота?
Используйте пункт "Остановить бота" в [launcher.bat](file:///d:/Users/br/Documents/GitHub/site/launcher.bat) или вручную через диспетчер задач.

### Как обновить бота?
1. Запустите [launcher.bat](file:///d:/Users/br/Documents/GitHub/site/launcher.bat)
2. Выберите пункт "Обновить бота из GitHub"
3. Лаунчер автоматически установит обновленные зависимости

### Где найти токен бота?
1. Откройте Telegram
2. Найдите @BotFather
3. Создайте нового бота или получите токен существующего
4. Добавьте токен в файл [.env](file:///d:/Users/br/Documents/GitHub/site/.env)